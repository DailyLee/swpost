Sentry.init({dsn:"https://690b1e8e41244bb1aafa7bf1b7ef559e@sentry.mihoyo.com/23"});var dom=document.getElementById("register");function swSupported(){var e,r,o,i=(e={},r=navigator.userAgent.toLowerCase(),o=void 0,(o=r.match(/edge\/([\d.]+)/))?e.edge=o[1]:(o=r.match(/rv:([\d.]+)\) like gecko/))?e.ie=o[1]:(o=r.match(/msie ([\d.]+)/))?e.ie=o[1]:(o=r.match(/firefox\/([\d.]+)/))?e.firefox=o[1]:(o=r.match(/chrome\/([\d.]+)/))?e.chrome=o[1]:(o=r.match(/opera.([\d.]+)/))?e.opera=o[1]:(o=r.match(/version\/([\d.]+).*safari/))&&(e.safari=o[1]),e.edge?{browser:"Edge",version:e.edge}:e.ie?{browser:"IE",version:e.ie}:e.firefox?{browser:"Firefox",version:e.firefox}:e.chrome?{browser:"Chrome",version:e.chrome}:e.opera?{browser:"Opera",version:e.opera}:e.safari?{browser:"Safari",version:e.safari}:{browser:"",version:"0"});return("Chrome"!==i.browser||Number(i.version.split(".")[0])>43)&&"serviceWorker"in navigator}swSupported()?window.onload=function(){function e(e){for(var r=location.search.substring(1).split("&"),o=0;o<r.length;o++){var i=r[o].split("=");if(i[0]===e)return decodeURIComponent(i[1])}return null}try{var r=1e3*Math.floor((new Date).getTime()/1e4)*10,o=e("lang")||navigator.language,i=e("gameBiz"),t=e("network"),n=e("platform"),a=e("unregister"),s=window.location.href.split("?")[0].split("/").pop().split(".html")[0],c="?timestamp="+r+"&lang="+o+"&gameBiz="+i+"&network="+t+"&platform="+n,p="./"+i.split("_")[0]+"/";"true"===a?function(e){navigator.serviceWorker.getRegistration(e).then(function(e){e&&e.unregister&&e.unregister()})}(p):function(e,r,o){navigator.serviceWorker.register(e+".js"+r,{scope:o}).then(function(e){dom.innerHTML="ServiceWorker registration successful with scope: "+e.scope}).catch(function(e){dom.innerHTML="ServiceWorker registration failed: "+e,Sentry.captureException(e)})}(s,c,p)}catch(e){dom.innerHTML="ServiceWorker registration failed: "+e,Sentry.captureException(e)}}:(dom.innerHTML="###serviceWorker not support###",Sentry.captureException(new Error("serviceWorker not support")));
